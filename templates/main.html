{% load i18n %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>{% block title %}Job Tracker{% endblock %}</title>

    <!-- CSS -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'dashboard/css/dashboard.css' %}">
    <!-- HTMX -->
    <script src="https://unpkg.com/htmx.org@1.9.12"></script>
  </head>
  <body>
    
    <!-- Hidden CSRF token for HTMX -->
    <form id="csrf-token-form" style="display: none;">
      {% csrf_token %}
    </form>
    
    {% block main %}
    {% endblock %}

    {% block extra_scripts %}
    <!-- HTMX CSRF Token support -->
    <script>
          document.body.addEventListener('htmx:configRequest', function (event) {
            const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]')?.value;
            if (csrfToken) {
              event.detail.headers['X-CSRFToken'] = csrfToken;
            }
          });
        </script>

    <!-- Flashmessage -->
    <script>
        function showFlash(message) {
          const flash = document.getElementById('flash-message');
          if (!flash) return;
          flash.textContent = message;
          flash.style.display = 'block';

          // Hide after 3 seconds
          setTimeout(() => {
            flash.style.display = 'none';
          }, 3000);
        }
      </script>

      

    {% endblock %}
  </body>
</html>
